# Development overrides
# Usage: docker compose -f docker-compose.yml -f docker-compose.dev.yml up
services:
  homeassistant:
    ports:
      - "8123:8123"
    environment:
      - HA_ENV=development
    # Less aggressive restart in dev
    restart: "no"

  frame-display:
    ports:
      - "3001:3001"
    environment:
      - HA_URL=http://homeassistant:8123
    restart: "no"

  # Mock MQTT broker for testing integrations (optional)
  mosquitto:
    image: eclipse-mosquitto:2
    container_name: concord-mqtt-dev
    ports:
      - "1883:1883"
      - "9001:9001"
    volumes:
      - mosquitto-data:/mosquitto/data
      - mosquitto-log:/mosquitto/log
    profiles:
      - mqtt  # Only start with --profile mqtt

volumes:
  mosquitto-data:
  mosquitto-log:
